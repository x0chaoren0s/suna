# 记忆归档 - 【小黑：本地】

**归档时间**: 2025-11-17 17:13  
**终端标识**: xiaohei_local  
**终端显示名**: 【小黑：本地】

---

## 短期记忆 - 部署biye项目跨终端记忆系统

**记忆ID**: mem_20251117_005  
**创建时间**: 2025-11-17 17:13  
**类型**: 工作进行中  
**状态**: 进行中（PLAN模式，等待biye项目信息）  
**目标终端**: 【大黑-毕业win10：Ubuntu】

### 工作目标

将suna的跨终端记忆机制部署到biye项目，实现多终端开发的一致体验。

### 应用场景

- biye项目位于Ubuntu服务器
- 多个终端远程开发：大黑-毕业win10、小黑、小黑-毕业等
- 需要在不同机器间获得一致的开发体验
- suna作为框架集成到biye，需要区分业务知识和框架知识

### 已完成的讨论和决策

#### 1. 方案探讨（5种方案）

**方案A：独立记忆系统集成**
- 各项目独立的`.memory/`系统
- 简单但知识不互通

**方案B：嵌套记忆系统（项目关系映射）**
- 父子关系，支持知识导出
- 实现复杂

**方案C：共享记忆池 + 项目命名空间**
- 单一系统，记忆带项目标识
- 可能造成混淆

**方案D：框架化 + 知识库分离** ⭐**最终推荐**
- biye有独立`.memory/`（业务知识）
- suna有独立`.memory/`（框架知识）
- 知识边界清晰，各自独立演进
- 通用知识可从biye提炼到suna

**方案E：双记忆策略（同时记录，标记区分）**
- scope字段区分知识来源
- 后期可灵活筛选

#### 2. 最终推荐架构

```
biye/                          # 毕业项目
├── .memory/                   # biye业务记忆
│   ├── config/
│   ├── index/
│   └── archives/
├── suna/                      # suna框架
│   ├── .memory/               # suna框架记忆
│   └── ...
└── .cursor/
    └── rules                  # 引用记忆协议
```

**优势**：
- 完全满足跨终端一致性
- 知识边界清晰
- 知识可传播（通用经验积累在suna）
- 独立演进
- 框架可复用

#### 3. 上下文识别方案（如何判断HARVEST存到哪里）

**方案1：基于文件路径的自动判断**
- 分析修改文件的路径占比
- 自动化但可能误判

**方案2：显式命令区分**
- `HARVEST suna` / `HARVEST biye`
- 明确但增加负担

**方案3：智能分析 + 确认机制** ⭐**最终推荐**
- AI自动判断（文件路径+提交信息+文件类型）
- 高置信度自动执行，低置信度询问
- 支持显式命令覆盖

**方案4：工作区感知 + 配置文件**
- 通过`.cursor/rules`配置判断逻辑
- 灵活可配置

**方案5：双记忆策略**
- scope字段区分
- 避免判断

#### 4. 最终推荐实现（混合方案）

**核心机制**：方案3（智能分析+确认） + 方案2（显式命令）

**判断逻辑**：
1. 分析修改的文件路径占比（suna/ vs biye/）
2. 分析提交信息关键词（[suna]、framework等）
3. 分析修改的文件类型（核心框架 vs 业务代码）
4. 综合判断，给出置信度

**AI行为**：
- 置信度 > 80%：自动选择目标，明确告知用户
- 置信度 < 80%：询问用户确认
- 支持`HARVEST suna`显式指定
- 支持提交信息标记（如`[suna] ...`）

#### 5. 实施策略（渐进式）

**第一阶段：MVP - 立即可用（30分钟）**
- biye项目创建独立的`.memory/`系统
- 支持基本的SYNC/HARVEST
- 暂不考虑suna独立记忆（先都记到biye）

**第二阶段：双记忆系统（+1-2小时）**
- suna有独立的`.memory/`
- 支持`HARVEST suna`显式指定
- 还不实现自动判断

**第三阶段：智能判断（+2-3小时）**
- AI自动判断记忆目标
- 不确定时询问用户
- 支持提交信息标记

### 当前进度

- ✅ 完成方案探讨和决策（INNOVATE模式）
- ✅ 确定实施策略
- ✅ 进入PLAN模式准备制定详细计划
- ⏸️ 等待biye项目的具体信息

### 待确认信息

- [ ] biye项目访问方式（Remote-SSH？）
- [ ] biye项目完整路径
- [ ] biye项目Git状态（本地仓库？远程仓库？）
- [ ] suna集成方式（复制？克隆？子模块？）
- [ ] 首次配置的终端标识

### 下一步行动计划

**用户在【大黑-毕业win10：Ubuntu】上恢复工作后**：
1. 执行`SYNC`学习这条记忆
2. 在biye项目中执行`git status`和`git commit`保存当前状态
3. 提供biye项目的关键信息
4. 继续执行详细的部署计划（MVP阶段）

### 相关标签

- `biye` - 目标项目
- `deployment` - 部署工作
- `memory-system` - 记忆系统
- `cross-terminal` - 跨终端
- `planning` - 规划阶段

---

**备注**：此记忆将在【大黑-毕业win10：Ubuntu】上通过SYNC学习，实现跨终端工作的无缝衔接。

